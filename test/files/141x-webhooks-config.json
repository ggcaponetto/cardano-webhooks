{
    "total_rows": 4,
    "offset": 0,
    "rows": [
        {
            "id": "968ce3a9-a4a2-485b-8110-406a48acfa0e",
            "key": "968ce3a9-a4a2-485b-8110-406a48acfa0e",
            "value": {
                "rev": "1-a69fdc1547a5df510a3646b7c9c1b7b7"
            },
            "doc": {
                "createdAt": "2021-09-07T09:59:17.739Z",
                "type": "webhook",
                "active": true,
                "name": "Slack Message",
                "script": "\nasync function callAPI(){\n  // more info on: https://api.slack.com/messaging/sending#permissions\n  \tconst SLACK_WEBHOOK_URL = \"https://hooks.slack.com/services/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\"\n  \tconst updates = ctx.util.updates;\n  \tconst tables = new Set([...updates.map((update) => update.table)]);\n    const message = `processing ${updates.length} updates`;\n    const slackResponse = await ctx.util.axios({\n      method: 'post',\n      url: SLACK_WEBHOOK_URL,\n      data: JSON.stringify({\n        \"text\": message.toString()\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Accept: 'application/json',\n      },\n    }).catch((e) => {\n      ctx.util.toast(e.message, {variant: 'error'});\n      return e;\n    });\n    if(slackResponse){\n      ctx.util.toast(JSON.stringify(slackResponse.data), {variant: 'success'});\n    }\n    return slackResponse;\n}\nreturn callAPI();\n",
                "_id": "968ce3a9-a4a2-485b-8110-406a48acfa0e",
                "_rev": "1-a69fdc1547a5df510a3646b7c9c1b7b7"
            }
        },
        {
            "id": "8516ae67-57fc-455f-8627-112f80a4b0af",
            "key": "8516ae67-57fc-455f-8627-112f80a4b0af",
            "value": {
                "rev": "1-7d7b15efd86c8c2eb8e25703d53bd516"
            },
            "doc": {
                "createdAt": "2021-09-07T09:59:16.093Z",
                "type": "webhook",
                "active": true,
                "name": "Discord Message",
                "script": "\nasync function customWebhook(){\n   \tconsole.log(`processing window`, {window});\n  \tconst updates = ctx.util.updates;\n  \tconst tables = new Set([...updates.map((update) => update.table)]);\n  \tconst message = `Got ${updates.length} updates.`\n  \tlet discordResponse = await ctx.util.axios({\n      method: \"post\",\n      url: \"https://discord.com/api/webhooks/882268616135942244/ClPNaAgaquEQyDUXbBVRb1C-gj6iFtTbieFR-3iN1DqLAm7FSvOuiDwnHTdk5fSxn-SH\",\n      data: {\n\t\tcontent: message.toString()\n      },\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: 'application/json',\n      }\n    });\n  \tif(discordResponse){\n      ctx.util.toast(JSON.stringify(discordResponse.status));\n    } else {\n      ctx.util.toast(e.message, {variant: 'error'});\n    }\n    return discordResponse;\n}\nreturn customWebhook();\n",
                "_id": "8516ae67-57fc-455f-8627-112f80a4b0af",
                "_rev": "1-7d7b15efd86c8c2eb8e25703d53bd516"
            }
        },
        {
            "id": "2a701d34-ff45-4e9e-8c5d-33fcdf214065",
            "key": "2a701d34-ff45-4e9e-8c5d-33fcdf214065",
            "value": {
                "rev": "1-f910958c0257ed528d29fe76cec5c7c8"
            },
            "doc": {
                "createdAt": "2021-09-07T09:59:13.907Z",
                "type": "webhook",
                "active": true,
                "name": "Coinbase API Call",
                "script": "\nasync function callAPI(){\n  \tconst updates = ctx.util.updates;\n  \tconst tables = new Set([...updates.map((update) => update.table)]);\n    const newAdaPrice = await ctx.util.axios({\n      url: 'https://api.coinbase.com/v2/prices/ADA-USD/buy',\n    }).catch((e) => {\n      ctx.util.toast(e.message, {variant: 'error'});\n    });\n\tctx.util.toast(`You called an the Coinbase API after ${updates.length} updates. Response: ${JSON.stringify(newAdaPrice.data)}`);\n}\nreturn callAPI();\n",
                "_id": "2a701d34-ff45-4e9e-8c5d-33fcdf214065",
                "_rev": "1-f910958c0257ed528d29fe76cec5c7c8"
            }
        },
        {
            "id": "2155dd98-c706-40a6-8d1f-19b9d92502f0",
            "key": "2155dd98-c706-40a6-8d1f-19b9d92502f0",
            "value": {
                "rev": "1-ffe11ff93e95530245c0b33e5d2b609a"
            },
            "doc": {
                "createdAt": "2021-09-07T09:59:11.259Z",
                "type": "webhook",
                "active": true,
                "name": "Custom Webhook",
                "script": "\nasync function customWebhook(){\n  \tconst updates = ctx.util.updates;\n  \tconst tables = new Set([...updates.map((update) => update.table)]);\n  \tctx.util.toast(`processing ${updates.length} updates of ${tables.length} channels`, {updates, tables});\n}\nreturn customWebhook();\n",
                "_id": "2155dd98-c706-40a6-8d1f-19b9d92502f0",
                "_rev": "1-ffe11ff93e95530245c0b33e5d2b609a"
            }
        }
    ]
}
